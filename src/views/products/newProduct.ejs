<!DOCTYPE html>
<html lang="en">

<%-include('../partials/head')  %>

<body>

    <%-include('../partials/header')  %>

    <main class="form-product-container">

        <div class="bloque-prod">

            <form class="form-product" action="/products/<%= (locals.editProduct) ? editProduct.id+'?_method=PUT' : '' %>" method="post" enctype="multipart/form-data"> 

                <h2><%= (locals.editProduct) ? "Editar" : "Nuevo" %> producto</h2>

                <% if (locals.editProduct) { %>
                    <input type="hidden" name="id" value=<%= editProduct.id %> >
                    <input type="hidden" name="borrado" value=<%= editProduct.borrado %> >
                <% } %>
                
                <div>
                    <input class="text-field-product" type="text" name="name" placeholder="Nombre del producto" <% if (locals.editProduct) {%> value="<%= editProduct.name %>"<%} %> >
                </div>


                <div>
                    <input class="text-field-product" type="text" name="descripcion" placeholder="DescripciÃ³n" <% if (locals.editProduct) {%> value="<%= editProduct.description %>"<%} %> >
                </div>
                

                <div class="product-file-container">
                    <label class="product-label-file" for="image">Agregar imagenes</label>
                    <input type="file" name="image" id="image">
                </div>

                <div class="cantidad-product-container">
                    <label for="product-cantidad">Cantidad</label>
                    <input class="text-field-product product-cantidad" type="text" name="productCantidad" id=""  placeholder="cantidad" <% if (locals.editProduct) {%> value="<%= editProduct.stock %>"<%} %> >
                </div>

                
                <div class="product-description">
                    
                    <div class="categories-container">
                        
                        <label for="categories">Categorias</label>
                        
                        <select class="product-categories" name="categories" id="" >
                            <% categorias.forEach(element => { %>
                                <option  class="product-categories-options" value="<%= element.id %>" <%= locals.editProduct && locals.editProduct.id_category == element.id ? 'selected' : '' %> ><%= element.name %></option>
                            <% }) %>
                        </select>
                    </div>
                    
                    
                </div>



                <div>
                    <input class="text-field-product" type="text" name="precio" placeholder="Precio" <% if (locals.editProduct) {%> value="<%= editProduct.price %>"<%} %>>
                </div>
             
                <div class="button-products">
                    <button><%= (locals.editProduct) ? "Modificar" : "Agregar" %></button>
                    <button><a href="/">Cancelar</a></button>
                </div>

            </form>
            <% if (locals.editProduct) { %>
                <form method="POST" action="/products/<%= editProduct.id %>?_method=DELETE">
                    <button class="delete-button" type="submit">BORRAR</button> 
                  </form>
            <% } %>
            

        </div>

    </main>

    <%-include('../partials/footer')  %>

</body>

</html>